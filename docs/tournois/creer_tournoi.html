<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Créer un Tournoi</title>
    <style>
        .form-categorie {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .form-container {
            /*max-width: 600px;*/
            max-width: 80%;
            margin: 0 auto;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 10px;
            background-color: #f9f9f9;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
        }

        .form-group input:disabled,
        .form-categorie input:disabled {
            background-color: #c7c7c7;
        }

        .form-categorie input {
            /*width: 100%;*/
            padding: 6px;
            box-sizing: border-box;
        }

        .form-group input {
            width: 100%;
            padding: 6px;
            box-sizing: border-box;
        }

        .form-group button {
            padding: 10px 15px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .form-group button:hover {
            background-color: #0056b3;
        }

        .label-categorie {
            width: 6em;
            display: inline-block;
        }
    </style>
</head>

<body>
    <div class="form-container">
        <h2>Créer un Tournoi</h2>
        <form id="tournoiForm">
            <div class="form-group">
                <label for="mail">Mail *</label>
                <input type="text" id="mail" name="Mail" required>
            </div>
            <div class="form-group">
                <label for="club">Club *</label>
                <input type="text" id="club" name="Club" required>
            </div>
            <div class="form-group">
                <label for="date">Date *</label>
                <input type="date" id="date" name="Date" required>
            </div>
            <div class="form-group">
                <label for="date-limite">Date limite</label>
                <input type="date" id="date-limite" name="Date limite">
            </div>
            <div>
                <label>Catégorie</label>
                <div id="form-categorie" class="form-categorie">

                    <!-- <table id="table-categorie">
                        <tr>
                            <th>Categorie</th>
                            <th>Niveau</th>
                        </tr>
                    </table> -->
                </div>
            </div>
            <div class="form-group">
                <button type="submit">Générer</button>
            </div>
        </form>
    </div>
    <div class="result-container" id="resultContainer">
        <h3>Résultat du formulaire</h3>
        <pre id="result"></pre>
    </div>
    <script>

        const CATEGORIES = [
            "Seniors M",
            "Seniors F",
            "U21M",
            "U21F",
            "U18M",
            "U18F",
            "U15M",
            "U15F",
            "U13M",
            "U13F",
            "U11M",
            "U11F",
            "U9M",
            "U9F",
            "U7",
            "Loisir",
        ]

        function ajouterOption(selectId, valeur, texte) {
            const select = document.getElementById(selectId);
            const option = document.createElement('option');
            option.value = valeur;
            option.text = texte;
            select.appendChild(option);
        }

        function ajouterCategorie(categorie) {
            const checkbox_categorie = document.createElement('input');
            checkbox_categorie.type = "checkbox";
            checkbox_categorie.id = "categorie-" + categorie;

            const label_categorie = document.createElement('label');
            label_categorie.innerHTML = categorie;
            label_categorie.className = "label-categorie";

            const input_categorie = document.createElement('input');
            input_categorie.type = "text";
            input_categorie.id = "niveau-" + categorie;
            input_categorie.name = "niveau-" + categorie;
            input_categorie.required = true;
            input_categorie.disabled = true;

            const div_categorie = document.createElement('div');
            div_categorie.appendChild(checkbox_categorie);
            div_categorie.appendChild(label_categorie);
            div_categorie.appendChild(input_categorie);

            const form_categorie = document.getElementById("form-categorie");
            form_categorie.appendChild(div_categorie);

            //            const column_categorie = document.createElement('td');
            //            column_categorie.appendChild(checkbox_categorie);
            //            column_categorie.appendChild(label_categorie);
            //
            //            const column_niveau = document.createElement('td');
            //            column_niveau.appendChild(input_categorie);
            //
            //            const line_categorie = document.createElement('tr');
            //            line_categorie.appendChild(column_categorie);
            //            line_categorie.appendChild(column_niveau);
            //
            //            const form_categorie = document.getElementById("table-categorie");
            //            form_categorie.appendChild(line_categorie);

            checkbox_categorie.addEventListener('change', function () {
                if (checkbox_categorie.checked) {
                    input_categorie.disabled = false;
                } else {
                    input_categorie.disabled = true;
                }
            });
        }

        document.addEventListener('DOMContentLoaded', function () {
            for (categorie of CATEGORIES) {
                ajouterCategorie(categorie);
            }
        });

        document.getElementById('tournoiForm').addEventListener('submit', function (event) {
            event.preventDefault();

            const formData = new FormData(event.target);

            const resultContainer = document.getElementById('result');
            resultContainer.textContent = [
                formData.get("Mail"),
                formData.get("Club"),
                formData.get("Date"),
                formData.get("Date limite"),
                CATEGORIES.map(categorie => formData.get("niveau-" + categorie)).join(",")
            ].join(",");

        });
    </script>
</body>

</html>